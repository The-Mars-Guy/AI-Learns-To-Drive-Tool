<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Create AI (.evolution)</title>
  <link rel="stylesheet" href="create.css" />
</head>
<body>
  <div class="wrap">
    <div class="card">
      <!-- ACTIONS + OUTPUT -->
      <section class="section">
        <div class="row tight">
          <button id="createBtn" class="btn primary">Create .evolution</button>
          <span id="cStatus" class="pill" aria-live="polite"></span>
        </div>
        <div class="panel" id="outputPreview" aria-label="Output JSON preview" style="max-height:260px; overflow:auto"></div>
      </section>

      <!-- ALLOW & OVERWRITE -->
      <section class="section">
        <h2 class="h2">Allow & Overwrite</h2>
        <div class="panel">
          <label class="row tight">
            <input type="checkbox" id="devOverride" />
            Enable overrides (disable 5° snapping, customize hidden layer caps)
          </label>

          <div id="devForm" class="row wrap tight" style="margin-top:8px;opacity:.6;pointer-events:none">
            <label>Max total layers
              <input id="ovMaxLayers" type="number" min="3" step="1" value="20" class="btn in" />
            </label>
            <label>Max nodes per hidden
              <input id="ovMaxNodes" type="number" min="1" step="1" value="64" class="btn in" />
            </label>
          </div>

          <div class="hint" style="margin-top:6px">
            Default caps: total layers ≤ 8, hidden nodes ≤ 12. With overrides enabled, angles accept any integer (still clamped to −180…180),
            and caps above are used instead.
          </div>
        </div>
      </section>

      <!-- NEURAL NETWORK -->
      <!-- NEURAL NETWORK -->
<section class="section">
  <h2 class="h2">Neural Network</h2>

  <!-- Side-by-side: editable controls (left) + live preview (right) -->
  <div class="split-2">
    <!-- LEFT: editor UI is back -->
    <div class="col">
      <div class="panel">
        <div class="row tight">
          <span class="pill">Input (auto): <strong id="nnInputAuto">0</strong></span>
          <span class="pill">Output: <strong>2</strong></span>
          <span class="pill warn" id="nnWarn" style="display:none"></span>
        </div>

        <!-- Hidden layers controls (restored) -->
        <div id="hiddenLayers" class="panel" style="margin-top:10px"></div>
        <div class="row tight" style="margin-top:8px">
          <button id="addHidden" class="btn">Add hidden layer</button>
          <span class="pill" id="nnSummary"></span>
        </div>

        <!-- Extras that count toward input size -->
        <div class="row tight wrap extras" style="margin-top:10px">
          <label><input type="checkbox" class="c-extra" value="angularVelocity"> angularVelocity</label>
          <label><input type="checkbox" class="c-extra" value="correctDirection"> correctDirection</label>
          <label><input type="checkbox" class="c-extra" value="velocityFront"> velocityFront</label>
          <label><input type="checkbox" class="c-extra" value="velocitySide"> velocitySide</label>
          <label><input type="checkbox" class="c-extra" value="speed"> speed</label>
          <label><input type="checkbox" class="c-extra" value="wheelAngle"> wheelAngle</label>
          <label><input type="checkbox" class="c-extra" value="grip"> grip</label>
        </div>
      </div>
    </div>

    <!-- RIGHT: network preview -->
    <div class="col">
      <div class="visual-box">
        <div class="visual-title">Network preview</div>
        <svg id="nnSvg" width="100%" height="380" viewBox="0 0 980 380" preserveAspectRatio="xMidYMid meet" role="img" aria-label="Neural network diagram">
          <rect class="nn-raycast" x="0" y="0" width="980" height="380" fill="transparent"></rect>
        </svg>
      </div>
    </div>
  </div>
</section>

      <!-- SENSORS: input (left) + preview (right) -->
      <section class="section">
        <h2 class="h2">Sensors</h2>
        <div class="hint">Custom raycasts only. Angle −180 → 180 (0 is up). Extras count toward input size. <strong>Max 13 rays.</strong></div>

        <div class="split-2">
          <!-- LEFT: User inputs -->
          <div class="col">
            <div class="row tight" style="margin-top:8px">
              <label>Degrees
                <input id="cCustomDeg" type="number" step="5" value="0" class="btn in" />
              </label>
              <label>Length
                <input id="cCustomLen" type="number" min="0" step="1" value="900" class="btn in" />
              </label>
              <label class="row tight" style="align-items:center">
                <input id="cMirrorAdd" type="checkbox" />
                Mirror
              </label>
            </div>

            <div class="row tight">
              <button id="cAddRay" class="btn">Add raycast</button>
              <button id="cClearRays" class="btn">Clear all</button>
              <button id="cMirrorAll" class="btn">Mirror all existing</button>
              <span id="rayCountBadge" class="pill">0 rays</span>
            </div>

            <div class="panel" id="cCustomList"></div>
          </div>

          <!-- RIGHT: Rays preview (longer) -->
          <div class="col">
            <div class="visual-box">
              <div class="visual-title">Rays preview (0° up, +CW, −CCW)</div>
              <svg id="raysSvg" width="100%" height="360" viewBox="0 0 880 360" preserveAspectRatio="xMidYMid meet" role="img" aria-label="Raycast visual"></svg>
            </div>
          </div>
        </div>
      </section>

      <!-- META -->
      <section class="section" style="display:none;">
        <h2 class="h2">Meta</h2>
        <div class="row tight">
          <label>Color
            <select id="cColor" class="btn in"></select>
          </label>
          <span id="colorSwatch" class="swatch" aria-hidden="true"></span>
        </div>
      </section>

      <footer class="foot">
        Made By Mars
      </footer>
    </div>
  </div>

  <script src="create.js"></script>
</body>
</html>
